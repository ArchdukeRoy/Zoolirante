@model Zoolirante.ViewModels.AnimalListViewModel

@{
    ViewData["Title"] = "Index";
}

<div class="w-100 bg-dark py-5 text-white text-center" style="margin-top: -2px">
    <h1>Our Animal Showcase</h1>
</div>
<div class="w-100 bg-zoolirante-light py-1 shadow"></div>

<div class="container"> 
    <p class="pt-4 pb-3">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    @* Search feature *@
    <hr class="my-4 border-2 border-dark opacity-80">
    <div>
        @if (!string.IsNullOrEmpty(ViewBag.Error)) {
            <div class="alert alert-danger py-1" style="width: 30%">
                @ViewBag.Error
            </div>
        }
        <form asp-action="Index" method="get" class="row mb-4">
            <div class="input-group" style="max-width: 500px">
                <input type="text" name="searchAnimal" class="form-control" placeholder="Filter Animal" value="@ViewData["PresentFilter"]">
                <button type="submit" class="btn btn-dark">Search</button>
            </div>
        </form>
    </div>

    <hr class="my-4 border-2 border-dark opacity-80">

    @if (TempData["Liked"] != null) {
        <div class="alert alert-info py-1">
            @TempData["Liked"]
        </div>
    }

    <div class="container-fluid p-0 animal-showcase">
        <div class="row g-0">
            @foreach (var a in Model.SpeciesList)
            {
                <div class="col-md-6 p-0">
                    <div class="card h-100 text-white bg-light position-relative rounded-0 special-card">
                        @if (Context.Session.GetInt32("id").HasValue && Context.Session.GetInt32("id") != 0) {
                            <form asp-action="Like" asp-route-id="@a.SpeciesId" method="post">
                                <button type="submit" class="btn btn-dark btn-sm position-absolute top-0 end-0 m-3 d-flex align-items-center justify-content-center" 
                                        style="border-radius: 0.8rem; width: 32px; height: 32px; z-index: 3;"
                                        title="Add to liked list">

                                    @if (Model.DefaultVM.favouriteAnimals.Where(i => i.AnimalId == a.SpeciesId).FirstOrDefault() != null) {
                                        <i class="bi-heart-fill text-danger" style="margin-right: 1px; margin-top: 2px"></i>
                                    } else {
                                        <i class="bi-heart-fill text-light" style="margin-right: 1px; margin-top: 2px"></i>
                                    }

                                </button>
                            </form>
                        }
                        <a asp-action="Details" asp-route-id="@a.SpeciesId" style="text-decoration: none; color: inherit;">
                            @if (a.Habitat == "Land")
                            {
                                <div class="card-body p-0 hover-tint land rounded-0">
                                    <img src="@a.SpeciesImage" alt="@a.Name" class="card-img img-fluid w-100" style="max-height:300px; object-fit:cover;" />
                                    <div class="card-img-overlay d-flex flex-column justify-content-end align-items-center p-3 outlined-text" style="z-index: 2;">
                                        <h5 class="card-title mb-0 mt-2 fw-bold fs-2 ">@a.Name</h5>
                                        <p>Read more</p>
                                    </div>
                                </div>
                            }
                            else if (a.Habitat == "Sky") 
                            {
                                <div class="card-body p-0 hover-tint sky rounded-0">
                                    <img src="@a.SpeciesImage" alt="@a.Name" class="card-img img-fluid w-100" style="max-height:300px; object-fit:cover;" />
                                    <div class="card-img-overlay d-flex flex-column justify-content-end align-items-center p-3 outlined-text" style="z-index: 2;">
                                        <h5 class="card-title mb-0 mt-2 fw-bold fs-2 ">@a.Name</h5>
                                        <p>Read more</p>
                                    </div>
                                </div>
                            }
                            else if (a.Habitat == "Water")
                            {
                                <div class="card-body p-0 hover-tint water rounded-0">
                                    <img src="@a.SpeciesImage" alt="@a.Name" class="card-img img-fluid w-100" style="max-height:300px; object-fit:cover;" />
                                    <div class="card-img-overlay d-flex flex-column justify-content-end align-items-center p-3 outlined-text" style="z-index: 2;">
                                        <h5 class="card-title mb-0 mt-2 fw-bold fs-2 ">@a.Name</h5>
                                        <p>Read more</p>
                                    </div>
                                </div>
                            }
                            @if (Model.DefaultVM.admin == true) {
                                <div class="card-footer text-end">
                                    <a asp-action="Edit" asp-route-id="@a.SpeciesId" class="btn btn-sm btn-dark radius-2">Edit</a>
                                    <a asp-action="Delete" asp-route-id="@a.SpeciesId" class="btn btn-sm btn-danger radius-2">Delete</a> 
                                </div>
                            }
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
